<p align="center">
  <img src="https://img.shields.io/badge/WiseQuery-AI%20Knowledge%20Platform-6366f1?style=for-the-badge&logoColor=white" alt="WiseQuery" />
</p>

<h1 align="center">ğŸ§  WiseQuery</h1>

<p align="center">
  <strong>AI ê¸°ë°˜ ì§€ì‹ ê´€ë¦¬ í”Œë«í¼</strong><br/>
  í”„ë¡œì íŠ¸ë³„ë¡œ ëŒ€í™”ë¥¼ ì •ë¦¬í•˜ê³ , ì–´ë””ì„œë“  ì§ˆë¬¸í•˜ì„¸ìš”.<br/>
  ê³ ê¸‰ RAG ê¸°ìˆ ë¡œ ì „ì²´ ì§€ì‹ ë² ì´ìŠ¤ì—ì„œ ë‹µë³€ì„ ì–»ìœ¼ì„¸ìš”.
</p>

<p align="center">
  <a href="https://wisequery.app">
    <img src="https://img.shields.io/badge/ğŸŒ_Live_Demo-wisequery.app-6366f1?style=for-the-badge" alt="Live Demo" />
  </a>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white" />
  <img src="https://img.shields.io/badge/React_18-61DAFB?style=flat-square&logo=react&logoColor=black" />
  <img src="https://img.shields.io/badge/Vite-646CFF?style=flat-square&logo=vite&logoColor=white" />
  <img src="https://img.shields.io/badge/Express-000000?style=flat-square&logo=express&logoColor=white" />
  <img src="https://img.shields.io/badge/PostgreSQL-4169E1?style=flat-square&logo=postgresql&logoColor=white" />
  <img src="https://img.shields.io/badge/Supabase-3FCF8E?style=flat-square&logo=supabase&logoColor=white" />
  <img src="https://img.shields.io/badge/OpenAI-412991?style=flat-square&logo=openai&logoColor=white" />
  <img src="https://img.shields.io/badge/Stripe-635BFF?style=flat-square&logo=stripe&logoColor=white" />
  <img src="https://img.shields.io/badge/Render-46E3B7?style=flat-square&logo=render&logoColor=black" />
</p>

---

## âœ¨ Overview

**WiseQuery**ëŠ” Windows Explorer ìŠ¤íƒ€ì¼ì˜ AI ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ â†’ í´ë” â†’ ëŒ€í™”ì˜ ê³„ì¸µ êµ¬ì¡°ë¡œ ì§€ì‹ì„ ì •ë¦¬í•˜ê³ , ì—…ë¡œë“œí•œ ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ AIì™€ ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œë§¨í‹± ê²€ìƒ‰(RAG)ìœ¼ë¡œ ì „ì²´ ì§€ì‹ ë² ì´ìŠ¤ì—ì„œ ê´€ë ¨ ë§¥ë½ì„ ì°¾ì•„ ì •í™•í•œ ë‹µë³€ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## ğŸ¯ Key Features

### ğŸ’¬ AI ëŒ€í™” & RAG
- **OpenAI GPT** ê¸°ë°˜ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì±„íŒ…
- **ì‹œë§¨í‹± ê²€ìƒ‰ (RAG)**: pgvector + ì½”ì‚¬ì¸ ìœ ì‚¬ë„ë¡œ ì—…ë¡œë“œ ë¬¸ì„œì—ì„œ ê´€ë ¨ ì»¨í…ìŠ¤íŠ¸ ìë™ ê²€ìƒ‰
- **ë¬¸ì„œ ì²­í‚¹ & ì„ë² ë”©**: ì—…ë¡œë“œ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì²­í¬ ë¶„í•  â†’ ë²¡í„° ì„ë² ë”© ìƒì„±
- **ë©€í‹°ëª¨ë‹¬ ì§€ì›**: ì´ë¯¸ì§€, PDF, Word, Excel, PowerPoint íŒŒì¼ ë¶„ì„

### ğŸ“ Explorer ìŠ¤íƒ€ì¼ UI
- **í”„ë¡œì íŠ¸ â†’ í´ë” â†’ ëŒ€í™”** 3ë‹¨ê³„ ê³„ì¸µí˜• íŒŒì¼ íŠ¸ë¦¬
- **ë“œë˜ê·¸ ì•¤ ë“œë¡­** í´ë”/ëŒ€í™” ì´ë™ (dnd-kit)
- **ìš°í´ë¦­ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´** ì§€ì›
- **íœ´ì§€í†µ** ë° íŒŒì¼ ë³µì› ê¸°ëŠ¥

### ğŸ” ì¸ì¦ & ë³´ì•ˆ
- **ì†Œì…œ ë¡œê·¸ì¸**: Google Â· ë„¤ì´ë²„ Â· ì¹´ì¹´ì˜¤ OAuth 2.0
- **ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦**: Passport.js + PostgreSQL ì„¸ì…˜ ìŠ¤í† ì–´
- **bcrypt** ë¹„ë°€ë²ˆí˜¸ í•´ì‹±

### ğŸ’³ SaaS êµ¬ë… (Stripe)
| Plan | Projects | Conversations | Storage | AI Features |
|------|----------|--------------|---------|-------------|
| **Free** | 3 | 30 | 10 GB | Basic |
| **Basic** | 10 | Unlimited | 50 GB | Enhanced |
| **Pro** | Unlimited | Unlimited | 100 GB | Full + Image Gen |
| **Custom** | Unlimited | Unlimited | Unlimited | Enterprise |

### ğŸŒ ë‹¤êµ­ì–´ & UX
- **í•œêµ­ì–´ / English** i18n ì§€ì› (i18next)
- **ë‹¤í¬ ëª¨ë“œ / ë¼ì´íŠ¸ ëª¨ë“œ** í† ê¸€ (next-themes)
- **ë°˜ì‘í˜• ë””ìì¸** (ëª¨ë°”ì¼ ìµœì í™”)

---

## ğŸ—ï¸ Architecture

```
WiseQuery/
â”œâ”€â”€ client/                 # ğŸ¨ Frontend (React + Vite)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/          # Landing, Home, Pricing, Login...
â”‚   â”‚   â”œâ”€â”€ components/     # UI Components (shadcn/ui)
â”‚   â”‚   â”œâ”€â”€ hooks/          # Custom React Hooks
â”‚   â”‚   â””â”€â”€ lib/            # Utilities & API client
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ server/                 # âš™ï¸ Backend (Express + TypeScript)
â”‚   â”œâ”€â”€ routes/             # Modular API routes
â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚   â”‚   â”œâ”€â”€ files.routes.ts
â”‚   â”‚   â”œâ”€â”€ stripe.routes.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ storage/            # Data access layer (Drizzle ORM)
â”‚   â”‚   â”œâ”€â”€ users.storage.ts
â”‚   â”‚   â”œâ”€â”€ files.storage.ts
â”‚   â”‚   â”œâ”€â”€ vector.storage.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ sessionAuth.ts      # Session authentication
â”‚   â”œâ”€â”€ socialAuth.ts       # OAuth (Google, Naver, Kakao)
â”‚   â”œâ”€â”€ stripe.ts           # Payment integration
â”‚   â”œâ”€â”€ openai.ts           # AI & Embedding
â”‚   â””â”€â”€ supabaseStorage.ts  # File storage (Supabase)
â”‚
â”œâ”€â”€ shared/                 # ğŸ“¦ Shared types & schema
â”‚   â””â”€â”€ schema.ts           # Drizzle ORM schema + Zod types
â”‚
â””â”€â”€ package.json
```

---

## ğŸ› ï¸ Tech Stack

### Frontend
| Technology | Purpose |
|------------|---------|
| **React 18** | UI Framework (SPA) |
| **Vite** | Build tool & dev server |
| **TypeScript** | Type safety |
| **Tailwind CSS** | Styling |
| **shadcn/ui** | UI component library |
| **Wouter** | Client-side routing |
| **TanStack Query** | Server state management |
| **Framer Motion** | Animations |
| **i18next** | Internationalization |
| **Recharts** | Data visualization |

### Backend
| Technology | Purpose |
|------------|---------|
| **Express** | HTTP server |
| **Passport.js** | Authentication (Session + OAuth) |
| **Drizzle ORM** | Database ORM (type-safe) |
| **OpenAI API** | GPT chat + text-embedding-3-small |
| **Stripe** | Subscription billing |
| **Supabase Storage** | File upload & storage |
| **node-cron** | Scheduled tasks |

### Infrastructure
| Service | Purpose |
|---------|---------|
| **Neon PostgreSQL** | Primary database (pgvector) |
| **Supabase** | File storage & pooling |
| **Render** | Hosting & deployment |
| **GitHub** | Version control & CI/CD |

---

## ğŸš€ Getting Started

### Prerequisites

- **Node.js** 20+ 
- **PostgreSQL** 15+ (with pgvector extension)
- **npm** 9+

### 1. Clone & Install

```bash
git clone https://github.com/junhan95/Wisequery.git
cd Wisequery
npm install
```

### 2. Environment Variables

`.env` íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìƒì„±í•©ë‹ˆë‹¤:

```env
# Database
DATABASE_URL=postgresql://user:password@host:5432/dbname

# Session
SESSION_SECRET=your-secret-key

# OpenAI
OPENAI_API_KEY=sk-...

# Supabase Storage
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_STORAGE_BUCKET=wisequery-files

# App
APP_URL=http://localhost:5000

# OAuth - Google
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# OAuth - Naver (optional)
NAVER_CLIENT_ID=your-naver-client-id
NAVER_CLIENT_SECRET=your-naver-client-secret

# OAuth - Kakao (optional)
KAKAO_CLIENT_ID=your-kakao-rest-api-key
KAKAO_CLIENT_SECRET=your-kakao-client-secret

# Stripe (optional)
STRIPE_SECRET_KEY=sk_...
STRIPE_WEBHOOK_SECRET=whsec_...
```

### 3. Database Setup

```bash
npm run db:push     # Drizzle schema â†’ PostgreSQL
```

### 4. Run Development Server

```bash
npm run dev         # Starts on http://localhost:5000
```

### 5. Production Build

```bash
npm run build       # Vite frontend + esbuild backend
npm start           # Runs production bundle
```

---

## ğŸ“¡ API Endpoints

| Module | Endpoints | Auth |
|--------|-----------|------|
| **Auth** | `GET /api/auth/user` `GET /api/auth/google\|naver\|kakao` | âœ… |
| **Projects** | CRUD `/api/projects` | âœ… |
| **Folders** | CRUD `/api/folders` | âœ… |
| **Conversations** | CRUD `/api/conversations` | âœ… |
| **Files** | Upload/Download/Delete `/api/files` | âœ… |
| **Chat** | `POST /api/chat` (SSE streaming) | âœ… |
| **Search** | `POST /api/search` (semantic) | âœ… |
| **Stripe** | Subscription/Checkout/Webhook | âœ…/ğŸ”“ |
| **Admin** | User management `/api/admin` | âœ…ğŸ‘‘ |
| **Trash** | Soft delete & restore | âœ… |

---

## ğŸ” RAG Pipeline

```mermaid
flowchart LR
    A[ğŸ“„ Upload] --> B[ğŸ“ Extract Text]
    B --> C[âœ‚ï¸ Chunk]
    C --> D[ğŸ§® Embed<br/>text-embedding-3-small]
    D --> E[(ğŸ—„ï¸ pgvector)]
    
    F[ğŸ’¬ User Query] --> G[ğŸ§® Query Embed]
    G --> H{ğŸ” Cosine<br/>Similarity}
    E --> H
    H --> I[ğŸ“‹ Top-K Chunks]
    I --> J[ğŸ¤– GPT + Context]
    J --> K[ğŸ’¡ Answer]
```

1. **ë¬¸ì„œ ì—…ë¡œë“œ** â†’ PDF/Word/Excel/PowerPoint í…ìŠ¤íŠ¸ ì¶”ì¶œ
2. **ì²­í‚¹** â†’ í† í° ê¸°ë°˜ ì²­í¬ ë¶„í•  (metadata í¬í•¨)
3. **ì„ë² ë”©** â†’ OpenAI `text-embedding-3-small` (1536ì°¨ì›)
4. **ì €ì¥** â†’ PostgreSQL pgvector í™•ì¥
5. **ì§ˆì˜** â†’ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ Top-K â†’ GPT ì»¨í…ìŠ¤íŠ¸ ì£¼ì…

---

## ğŸš¢ Deployment

### Render (Recommended)

ì´ í”„ë¡œì íŠ¸ëŠ” `render.yaml`ì´ í¬í•¨ë˜ì–´ ìˆì–´ Renderì— ì›í´ë¦­ ë°°í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

| Setting | Value |
|---------|-------|
| **Build Command** | `npm install --include=dev; npm run build` |
| **Start Command** | `npm start` |
| **Node Version** | 20+ |

---

## ğŸ“„ License

This project is licensed under the **MIT License**.

---

<p align="center">
  <sub>Built with â¤ï¸ by <a href="https://github.com/junhan95">junhan95</a></sub>
</p>
